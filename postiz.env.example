# ====================================================================
# POSTIZ CONFIGURATION FILE (postiz.env)
# ====================================================================
# Place this file in your docker-compose directory as 'postiz.env'
# It will be mounted to /config/postiz.env inside the Postiz container
#
# This follows Postiz recommended configuration approach (Option B):
# Environment variables stored in a dedicated postiz.env file
# http://docs.postiz.com/configuration/reference
# ====================================================================

# ===== REQUIRED SETTINGS =====

# Database connection string
# Format: postgresql://username:password@host:port/database
DATABASE_URL="postgresql://postiz-user:postiz-password@postiz-postgres:5432/postiz-db-local"

# Redis connection string
REDIS_URL="redis://postiz-redis:6379"

# JWT Secret for session authentication
# Generate with: openssl rand -base64 32
JWT_SECRET="random string for your JWT secret, make it long"

# === This needs to be exactly the URL you're accessing Postiz on
MAIN_URL: "https://postiz.example.com"
FRONTEND_URL: "https://postiz.example.com"
NEXT_PUBLIC_BACKEND_URL: "https://postiz.example.com/api"

# Internal backend URL (used by frontend to communicate with backend)
BACKEND_INTERNAL_URL=http://postiz:5000

## Remember to set your public internet IP address in the allow-list for the API token.
## Cloudflare is currently required to save things like social media avatars for accounts.
# === Uncomment below if using Cloudflare R2 ===
#CLOUDFLARE_ACCOUNT_ID="your-account-id"
#CLOUDFLARE_ACCESS_KEY="your-access-key"
#CLOUDFLARE_SECRET_ACCESS_KEY="your-secret-access-key"
#CLOUDFLARE_BUCKETNAME="your-bucket-name"
#CLOUDFLARE_BUCKET_URL="https://your-bucket-url.r2.cloudflarestorage.com/"
#CLOUDFLARE_REGION="auto"

# === COMMON OPTIONAL SETTINGS =====

## This is a dummy key, you must create your own from Resend.
## If this variable exists, user activation is required.
## If it is commented out, users are activated automatically.
#RESEND_API_KEY="RzeTwHijvxvPUerScFcenUZUALuQJzSaGSMJ"
#EMAIL_FROM_ADDRESS=""
#EMAIL_FROM_NAME=""

# This will only allow a single user registration, and then after that the sign-up page will be disabled. Useful for self-hosting where you want complete control over users.
# WARNING: This will disable OIDC / OAuth!
DISABLE_REGISTRATION=false

# ===== STORAGE SETTINGS =====

# Where will social media icons be saved - local or cloudflare.
STORAGE_PROVIDER=local

# Your upload directory path if you host your files locally, otherwise Cloudflare will be used.
UPLOAD_DIRECTORY=/uploads

# Your upload directory path if you host your files locally, otherwise Cloudflare will be used.
NEXT_PUBLIC_UPLOAD_DIRECTORY=/uploads

# ===== SOCIAL MEDIA API SETTINGS =====
# Add credentials only for platforms you plan to use

# Twitter / X
X_API_KEY=
X_API_SECRET=

# LinkedIn
LINKEDIN_CLIENT_ID=
LINKEDIN_CLIENT_SECRET=

# Reddit
REDDIT_CLIENT_ID=
REDDIT_CLIENT_SECRET=

# GitHub
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# Threads
THREADS_APP_ID=
THREADS_APP_SECRET=

# Facebook
FACEBOOK_APP_ID=
FACEBOOK_APP_SECRET=

# YouTube
YOUTUBE_CLIENT_ID=
YOUTUBE_CLIENT_SECRET=

# TikTok
TIKTOK_CLIENT_ID=
TIKTOK_CLIENT_SECRET=

# Pinterest
PINTEREST_CLIENT_ID=
PINTEREST_CLIENT_SECRET=

# Dribbble
DRIBBBLE_CLIENT_ID=
DRIBBBLE_CLIENT_SECRET=

# Discord
DISCORD_CLIENT_ID=
DISCORD_CLIENT_SECRET=
DISCORD_BOT_TOKEN_ID=

# Slack
SLACK_ID=
SLACK_SECRET=
SLACK_SIGNING_SECRET=

# Mastodon
MASTODON_URL=https://mastodon.social
MASTODON_CLIENT_ID=
MASTODON_CLIENT_SECRET=

# Beehiive
BEEHIIVE_API_KEY=
BEEHIIVE_PUBLICATION_ID=

# ===== MISC SETTINGS =====
OPENAI_API_KEY=""
NEXT_PUBLIC_DISCORD_SUPPORT=""
NEXT_PUBLIC_POLOTNO=""
# NOT_SECURED=false
API_LIMIT=30 # The limit of the public API hour limit

# ===== PAYMENT / STRIPE SETTINGS =====

FEE_AMOUNT=0.05

STRIPE_PUBLISHABLE_KEY=
STRIPE_SECRET_KEY=
STRIPE_SIGNING_KEY=
STRIPE_SIGNING_KEY_CONNECT=

# ===== DEVELOPER SETTINGS =====

NX_ADD_PLUGINS=false
IS_GENERAL="true" # required for now

# ===== OAUTH & AUTHENTIK SETTINGS =====
# Uncomment if integrating with Authentik or other OAuth providers

# NEXT_PUBLIC_POSTIZ_OAUTH_DISPLAY_NAME=Authentik
# NEXT_PUBLIC_POSTIZ_OAUTH_LOGO_URL=https://raw.githubusercontent.com/walkxcode/dashboard-icons/master/png/authentik.png
# POSTIZ_GENERIC_OAUTH=false
# POSTIZ_OAUTH_URL=https://auth.your-domain.com
# POSTIZ_OAUTH_AUTH_URL=https://auth.your-domain.com/application/o/authorize
# POSTIZ_OAUTH_TOKEN_URL=https://auth.your-domain.com/application/o/token
# POSTIZ_OAUTH_USERINFO_URL=https://auth.your-domain.com/application/o/userinfo
# POSTIZ_OAUTH_CLIENT_ID=
# POSTIZ_OAUTH_CLIENT_SECRET=
# POSTIZ_OAUTH_SCOPE=openid profile email

# ===== SHORT LINK SERVICE SETTINGS (Optional) =====
# Leave blank if unused. Choose ONE of the following services:

# Dub.co
# DUB_TOKEN=
# DUB_API_ENDPOINT=https://api.dub.co
# DUB_SHORT_LINK_DOMAIN=dub.sh

# Short.io
# SHORT_IO_SECRET_KEY=

# Kutt.it
# KUTT_API_KEY=
# KUTT_API_ENDPOINT=https://kutt.it/api/v2
# KUTT_SHORT_LINK_DOMAIN=kutt.it

# Link Drip
# LINK_DRIP_API_KEY=
# LINK_DRIP_API_ENDPOINT=https://api.linkdrip.com/v1/
# LINK_DRIP_SHORT_LINK_DOMAIN=dripl.ink

# ====================================================================
# SETUP INSTRUCTIONS
# ====================================================================
#
# 1. Replace placeholder values:
#    - MAIN_URL/FRONTEND_URL/NEXT_PUBLIC_BACKEND_URL → your domain
#    - JWT_SECRET → run: openssl rand -base64 32
#    - DATABASE_URL → update password if different
#
# 2. Add social media API credentials for platforms you use
#
# 3. Place this file next to docker-compose.yml as 'postiz.env'
#
# 4. Restart Postiz:
#    docker-compose restart postiz
#
# 5. Access Postiz:
#    https://postiz.your-domain.com
#
# ====================================================================
# IMPORTANT NOTES
# ====================================================================
#
# Security:
# - Never commit this file to git (add to .gitignore)
# - Use strong, unique JWT_SECRET
# - Keep this file readable only by docker user
#
# Changes:
# - After editing, restart Postiz: docker-compose restart postiz
# - Some settings require full container restart
#
# Troubleshooting:
# - Check logs: docker-compose logs postiz
# - Verify file permissions: ls -la postiz.env
# - Verify mount: docker exec postiz ls -la /config/postiz.env
#
# Database Backup:
# - docker-compose exec postiz-postgres pg_dump -U postiz-user postiz-db-local > backup.sql
#
# ====================================================================